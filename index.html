<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>Media Share Center</title>
  
  <script src="https://cdn.tailwindcss.com"></script>
  <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600&display=swap" rel="stylesheet">

  <style>
    body { font-family: 'Prompt', sans-serif; background-color: #f0f2f5; -webkit-tap-highlight-color: transparent; }
    /* Custom Scrollbar */
    textarea::-webkit-scrollbar { width: 6px; }
    textarea::-webkit-scrollbar-track { background: #f1f1f1; }
    textarea::-webkit-scrollbar-thumb { background: #ccc; border-radius: 3px; }
    
    .tab-btn { transition: all 0.2s ease; border-bottom: 3px solid transparent; }
    .tab-active { border-color: #06C755; color: #06C755; font-weight: 600; background-color: rgba(6, 199, 85, 0.08); }
    .tab-inactive { color: #9CA3AF; }
    
    /* Animation */
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    .animate-fade-in { animation: fadeIn 0.4s ease-out forwards; }
  </style>
</head>
<body class="text-gray-800 antialiased pb-28">

  <div id="loadingOverlay" class="fixed inset-0 bg-white/90 z-50 flex flex-col items-center justify-center backdrop-blur-sm transition-opacity duration-300">
    <div class="animate-spin rounded-full h-12 w-12 border-[3px] border-gray-200 border-t-[#06C755] mb-4 shadow-sm"></div>
    <p id="loadingText" class="text-gray-600 font-medium tracking-wide">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏∞‡∏ö‡∏ö...</p>
  </div>

  <div id="appContainer" class="max-w-lg mx-auto bg-white min-h-screen shadow-xl relative opacity-0 transition-opacity duration-500">
    
    <div class="bg-gradient-to-br from-[#06C755] to-[#049b42] text-white pt-10 pb-8 px-6 rounded-b-[2.5rem] shadow-lg mb-6 relative overflow-hidden">
      <div class="absolute top-0 right-0 -mr-8 -mt-8 w-32 h-32 rounded-full bg-white opacity-10"></div>
      <div class="absolute bottom-0 left-0 -ml-8 -mb-8 w-24 h-24 rounded-full bg-white opacity-10"></div>
      
      <div class="flex justify-between items-center relative z-10">
        <div>
          <h1 class="text-2xl font-bold tracking-tight">Share Center</h1>
          <p class="text-sm text-green-100 mt-1 opacity-90">‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏°‡∏∑‡∏≠‡∏≠‡∏≤‡∏ä‡∏µ‡∏û</p>
        </div>
        <div id="user-profile" class="hidden flex flex-col items-end">
          <img id="user-img" src="" class="w-11 h-11 rounded-full border-2 border-white/80 shadow-sm">
        </div>
      </div>
    </div>

    <div class="flex px-4 mb-6 gap-2">
      <button onclick="switchTab('image')" id="tab-image" class="tab-btn tab-active flex-1 py-3 rounded-lg text-sm shadow-sm border border-transparent">
        üñºÔ∏è ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
      </button>
      <button onclick="switchTab('video')" id="tab-video" class="tab-btn tab-inactive flex-1 py-3 rounded-lg text-sm shadow-sm border border-transparent bg-white">
        üé• ‡∏ß‡∏µ‡∏î‡∏µ‡πÇ‡∏≠
      </button>
      <button onclick="switchTab('json')" id="tab-json" class="tab-btn tab-inactive flex-1 py-3 rounded-lg text-sm shadow-sm border border-transparent bg-white">
        üíª JSON
      </button>
    </div>

    <div class="px-6 space-y-6 min-h-[400px]">

      <div id="form-image" class="animate-fade-in">
        <div class="space-y-5">
          <div>
            <label class="block text-sm font-semibold text-gray-700 mb-1.5 ml-1">‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ / Title</label>
            <input type="text" id="img-title" class="w-full rounded-xl border border-gray-300 px-4 py-3 focus:ring-2 focus:ring-[#06C755] focus:border-transparent outline-none transition bg-gray-50 focus:bg-white" placeholder="‡πÉ‡∏™‡πà‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û...">
          </div>
          <div>
            <label class="block text-sm font-semibold text-gray-700 mb-1.5 ml-1">‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û (Direct URL)</label>
            <input type="url" id="img-url" oninput="updatePreview('img')" class="w-full rounded-xl border border-gray-300 px-4 py-3 focus:ring-2 focus:ring-[#06C755] focus:border-transparent outline-none transition bg-gray-50 focus:bg-white" placeholder="https://example.com/image.jpg">
          </div>
          <div class="relative w-full aspect-video bg-gray-100 rounded-xl overflow-hidden border-2 border-dashed border-gray-300 flex items-center justify-center transition-all hover:border-[#06C755]/50">
            <img id="img-preview" src="" class="hidden w-full h-full object-cover shadow-inner">
            <div id="img-placeholder" class="text-center p-4">
              <svg class="mx-auto h-10 w-10 text-gray-400 mb-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
              <span class="text-gray-400 text-sm font-medium">‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</span>
            </div>
          </div>
        </div>
      </div>

      <div id="form-video" class="hidden animate-fade-in">
        <div class="space-y-5">
          <div>
            <label class="block text-sm font-semibold text-gray-700 mb-1.5 ml-1">‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏ß‡∏µ‡∏î‡∏µ‡πÇ‡∏≠</label>
            <input type="text" id="vid-title" class="w-full rounded-xl border border-gray-300 px-4 py-3 focus:ring-2 focus:ring-[#06C755] outline-none bg-gray-50 focus:bg-white" placeholder="‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡∏µ‡∏î‡∏µ‡πÇ‡∏≠...">
          </div>
          <div>
            <label class="block text-sm font-semibold text-gray-700 mb-1.5 ml-1">‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏†‡∏≤‡∏û‡∏õ‡∏Å (Thumbnail)</label>
            <input type="url" id="vid-thumb" oninput="updatePreview('vid')" class="w-full rounded-xl border border-gray-300 px-4 py-3 focus:ring-2 focus:ring-[#06C755] outline-none bg-gray-50 focus:bg-white" placeholder="https://.../cover.jpg">
          </div>
          <div>
            <label class="block text-sm font-semibold text-gray-700 mb-1.5 ml-1">‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÑ‡∏ü‡∏•‡πå‡∏ß‡∏µ‡∏î‡∏µ‡πÇ‡∏≠ (.mp4)</label>
            <input type="url" id="vid-url" class="w-full rounded-xl border border-gray-300 px-4 py-3 focus:ring-2 focus:ring-[#06C755] outline-none bg-gray-50 focus:bg-white" placeholder="https://.../video.mp4">
          </div>
          <div class="relative w-full aspect-video bg-gray-100 rounded-xl overflow-hidden border-2 border-dashed border-gray-300 flex items-center justify-center group">
            <img id="vid-preview" src="" class="hidden w-full h-full object-cover opacity-90">
            <div id="vid-icon" class="hidden absolute bg-black/60 rounded-full p-4 backdrop-blur-sm shadow-lg">
               <svg class="w-8 h-8 text-white ml-1" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
            </div>
            <span id="vid-placeholder" class="text-gray-400 text-sm font-medium">‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏†‡∏≤‡∏û‡∏õ‡∏Å</span>
          </div>
        </div>
      </div>

      <div id="form-json" class="hidden animate-fade-in">
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-1.5 ml-1">JSON Flex Message (Bubble)</label>
          <div class="relative group">
             <textarea id="json-code" rows="12" class="w-full rounded-xl border border-gray-300 px-4 py-3 font-mono text-xs bg-[#1e293b] text-green-400 focus:ring-2 focus:ring-[#06C755] outline-none transition shadow-inner" placeholder='{
  "type": "bubble",
  "body": {
    "type": "box",
    "layout": "vertical",
    "contents": []
  }
}'></textarea>
             <div class="absolute top-2 right-2 opacity-50 text-[10px] text-gray-400 select-none">JSON Mode</div>
          </div>
          <p class="text-xs text-gray-500 mt-2 ml-1">* ‡πÉ‡∏™‡πà‡πÄ‡∏â‡∏û‡∏≤‡∏∞ Object ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô contents</p>
        </div>
      </div>

    </div>

    <div class="fixed bottom-0 left-0 right-0 p-4 bg-white/80 backdrop-blur-md border-t border-gray-200 max-w-lg mx-auto z-40">
      <button onclick="handleShare()" class="w-full bg-[#06C755] hover:bg-[#05a546] text-white font-bold py-3.5 rounded-2xl shadow-lg shadow-green-200 transform transition-all active:scale-[0.98] flex justify-center items-center gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
          <path d="M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z" />
        </svg>
        <span>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</span>
      </button>
    </div>

  </div>

  <script>
    // ============================================
    // ‚öôÔ∏è ‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ (CONFIGURATION)
    // ============================================
    const LIFF_ID = '2008762104-HjyWLKYy'; // üî¥ ‡πÉ‡∏™‡πà LIFF ID ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
    const GAS_API_URL = 'https://script.google.com/macros/s/AKfycbzMcWiMOwGhtKfXbvmykmw0uRjVzF6LEiT4lMloN1xpg7LmP_OrCT1-zdxuYbEjW0RJ/exec'; // üî¥ ‡πÉ‡∏™‡πà Web App URL ‡∏Ç‡∏≠‡∏á Google Script
    // ============================================

    let currentType = 'image';
    let userProfile = null;

    // --- 1. System Initialization ---
    async function main() {
      try {
        await liff.init({ liffId: LIFF_ID });
        
        // Login Check
        if (!liff.isLoggedIn()) {
          liff.login();
          return;
        }

        // Get Profile
        userProfile = await liff.getProfile();
        document.getElementById('user-profile').classList.remove('hidden');
        document.getElementById('user-img').src = userProfile.pictureUrl;

        // -----------------------------------------------------------
        // üöÄ AUTO-SHARE LOGIC (Viral Loop)
        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡∏õ‡∏∏‡πà‡∏° "‡πÅ‡∏ä‡∏£‡πå‡∏ï‡πà‡∏≠" ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
        // -----------------------------------------------------------
        const urlParams = new URLSearchParams(window.location.search);
        const action = urlParams.get('action');

        if (action === 'reshare') {
            document.getElementById('loadingText').innerText = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Å‡∏≤‡∏£‡πÅ‡∏ä‡∏£‡πå...";
            
            // ‡∏ã‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡∏´‡∏•‡∏±‡∏Å
            document.getElementById('appContainer').style.display = 'none';

            // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
            const type = urlParams.get('type');
            const title = urlParams.get('title');
            const url = urlParams.get('url');
            const thumb = urlParams.get('thumb');

            // ‡∏™‡∏£‡πâ‡∏≤‡∏á Flex Message
            let flexContent;
            if (type === 'image') flexContent = getBubbleImage(title, url);
            else if (type === 'video') flexContent = getBubbleVideo(title, thumb, url);

            // ‡πÄ‡∏õ‡∏¥‡∏î Picker ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
            if (liff.isApiAvailable('shareTargetPicker')) {
                const pickerResult = await liff.shareTargetPicker([
                    {
                        type: "flex",
                        altText: `‡πÅ‡∏ä‡∏£‡πå‡∏ï‡πà‡∏≠: ${title || '‡∏™‡∏∑‡πà‡∏≠‡∏°‡∏±‡∏•‡∏ï‡∏¥‡∏°‡∏µ‡πÄ‡∏î‡∏µ‡∏¢'}`,
                        contents: flexContent
                    }
                ]);

                if (pickerResult) {
                    liff.closeWindow(); // ‡πÅ‡∏ä‡∏£‡πå‡πÄ‡∏™‡∏£‡πá‡∏à‡∏õ‡∏¥‡∏î‡πÄ‡∏•‡∏¢
                } else {
                    // ‡∏Å‡∏î‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å -> ‡πÇ‡∏ä‡∏ß‡πå‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡πÉ‡∏´‡πâ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà
                    document.getElementById('appContainer').style.display = 'block';
                    document.getElementById('appContainer').style.opacity = '1';
                    document.getElementById('loadingOverlay').classList.add('hidden');
                }
            } else {
                Swal.fire('Error', '‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏ä‡∏£‡πå', 'error');
                document.getElementById('loadingOverlay').classList.add('hidden');
            }
        } else {
            // ‡πÇ‡∏´‡∏°‡∏î‡∏õ‡∏Å‡∏ï‡∏¥ (Manual Create)
            document.getElementById('loadingOverlay').classList.add('hidden');
            document.getElementById('appContainer').style.opacity = '1';
        }

      } catch (err) {
        console.error("LIFF Init Error", err);
        document.getElementById('loadingText').innerText = "‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î";
        Swal.fire('Error', 'LIFF Initialization failed: ' + err.message, 'error');
      }
    }
    main();

    // --- 2. Tab Logic ---
    function switchTab(type) {
      currentType = type;
      ['image', 'video', 'json'].forEach(t => {
        const btn = document.getElementById(`tab-${t}`);
        const form = document.getElementById(`form-${t}`);
        if(t === type) {
            btn.className = 'tab-btn tab-active flex-1 py-3 rounded-lg text-sm shadow-sm border border-transparent';
            btn.style.backgroundColor = 'rgba(6, 199, 85, 0.08)';
            form.classList.remove('hidden');
        } else {
            btn.className = 'tab-btn tab-inactive flex-1 py-3 rounded-lg text-sm shadow-sm border border-transparent bg-white';
            btn.style.backgroundColor = 'white';
            form.classList.add('hidden');
        }
      });
    }

    // --- 3. Preview Logic ---
    function updatePreview(prefix) {
      const urlInput = prefix === 'img' ? 'img-url' : 'vid-thumb';
      const previewImg = document.getElementById(`${prefix}-preview`);
      const placeholder = document.getElementById(`${prefix}-placeholder`);
      const url = document.getElementById(urlInput).value;

      if(url) {
        previewImg.src = url;
        previewImg.classList.remove('hidden');
        placeholder.classList.add('hidden');
        if(prefix === 'vid') document.getElementById('vid-icon').classList.remove('hidden');
      } else {
        previewImg.classList.add('hidden');
        placeholder.classList.remove('hidden');
        if(prefix === 'vid') document.getElementById('vid-icon').classList.add('hidden');
      }
    }

    // --- 4. Main Share Action (Manual) ---
    async function handleShare() {
      if (!liff.isLoggedIn()) { await liff.login(); return; }
      if (!liff.isApiAvailable('shareTargetPicker')) {
        Swal.fire('‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö', '‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Share Target Picker', 'warning');
        return;
      }

      document.getElementById('loadingOverlay').classList.remove('hidden');
      document.getElementById('loadingText').innerText = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•...";

      try {
        let flexContent;
        let logData = { userId: userProfile?.userId || 'unknown', type: currentType, title: '', url: '' };

        if (currentType === 'image') {
          const title = document.getElementById('img-title').value;
          const url = document.getElementById('img-url').value;
          if(!url) throw new Error("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏ URL ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û");
          flexContent = getBubbleImage(title, url);
          logData.title = title; logData.url = url;
        } 
        else if (currentType === 'video') {
          const title = document.getElementById('vid-title').value;
          const thumb = document.getElementById('vid-thumb').value;
          const url = document.getElementById('vid-url').value;
          if(!url || !thumb) throw new Error("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ß‡∏µ‡∏î‡∏µ‡πÇ‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö");
          flexContent = getBubbleVideo(title, thumb, url);
          logData.title = title; logData.url = url;
        } 
        else {
          const jsonStr = document.getElementById('json-code').value;
          if(!jsonStr) throw new Error("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà JSON Code");
          flexContent = JSON.parse(jsonStr);
          logData.title = "Custom JSON";
        }

        const result = await liff.shareTargetPicker([
          { type: "flex", altText: logData.title || "‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏´‡∏°‡πà", contents: flexContent }
        ]);

        if (result) {
          sendLogToBackend(logData); // Save Log
          Swal.fire({
            icon: 'success',
            title: '‡∏™‡πà‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!',
            text: '‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß',
            confirmButtonColor: '#06C755'
          });
        } else {
          console.log("User cancelled");
        }
      } catch (error) {
        Swal.fire({ icon: 'error', title: '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î', text: error.message, confirmButtonColor: '#d33' });
      } finally {
        document.getElementById('loadingOverlay').classList.add('hidden');
      }
    }

    function sendLogToBackend(data) {
      fetch(GAS_API_URL, {
        method: 'POST', mode: 'no-cors',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      }).catch(console.error);
    }

    // --- 5. Flex Message Generators (with Re-Share Button) ---
    
    // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏•‡∏¥‡∏á‡∏Å‡πå LIFF ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Å‡∏î‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏õ‡∏¥‡∏î Picker ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
    function createShareLink(type, title, url, thumb = '') {
      const baseUrl = `https://liff.line.me/${LIFF_ID}`;
      const params = new URLSearchParams({
        action: 'reshare',
        type: type,
        title: title || '',
        url: url || '',
        thumb: thumb || ''
      });
      return `${baseUrl}?${params.toString()}`;
    }

    function getBubbleImage(title, url) {
      const shareUrl = createShareLink('image', title, url);
      return {
        "type": "bubble",
        "hero": {
          "type": "image", "url": url, "size": "full", "aspectRatio": "20:13", "aspectMode": "cover",
          "action": { "type": "uri", "uri": url }
        },
        "body": {
          "type": "box", "layout": "vertical",
          "contents": [
            { "type": "text", "text": title || "‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û", "weight": "bold", "size": "xl", "wrap": true }
          ]
        },
        "footer": {
          "type": "box", "layout": "vertical", "spacing": "sm",
          "contents": [
            {
               "type": "button", "style": "primary", "color": "#06C755", "height": "sm",
               "action": { "type": "uri", "label": "‡πÅ‡∏ä‡∏£‡πå‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô / ‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏≠‡∏∑‡πà‡∏ô", "uri": shareUrl }
            },
            {
               "type": "button", "style": "secondary", "height": "sm",
               "action": { "type": "uri", "label": "‡πÄ‡∏õ‡∏¥‡∏î‡∏î‡∏π‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÄ‡∏ï‡πá‡∏°", "uri": url }
            }
          ]
        }
      };
    }

    function getBubbleVideo(title, thumb, url) {
       const shareUrl = createShareLink('video', title, url, thumb);
       return {
          "type": "bubble",
          "hero": {
            "type": "image", "url": thumb, "size": "full", "aspectRatio": "20:13", "aspectMode": "cover",
            "action": { "type": "uri", "uri": url }
          },
          "body": {
            "type": "box", "layout": "vertical",
            "contents": [
              { "type": "text", "text": title || "‡∏ß‡∏µ‡∏î‡∏µ‡πÇ‡∏≠‡∏Ñ‡∏•‡∏¥‡∏õ", "weight": "bold", "size": "xl", "wrap": true },
              {
                "type": "image", "url": "https://cdn-icons-png.flaticon.com/512/727/727245.png",
                "position": "absolute", "offsetTop": "60px", "offsetStart": "0px", "offsetEnd": "0px", "align": "center", "size": "xs"
              }
            ]
          },
          "footer": {
            "type": "box", "layout": "vertical", "spacing": "sm",
            "contents": [
               {
                 "type": "button", "style": "primary", "color": "#06C755", "height": "sm",
                 "action": { "type": "uri", "label": "‡πÅ‡∏ä‡∏£‡πå‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô / ‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏≠‡∏∑‡πà‡∏ô", "uri": shareUrl }
               },
               {
                 "type": "button", "style": "secondary", "color": "#E1306C", "height": "sm",
                 "action": { "type": "uri", "label": "‚ñ∂ ‡πÄ‡∏•‡πà‡∏ô‡∏ß‡∏µ‡∏î‡∏µ‡πÇ‡∏≠", "uri": url }
               }
            ]
          }
       };
    }

  </script>
</body>
</html>
